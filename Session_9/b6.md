## Chuẩn hóa sang 1NF

| Mã hóa đơn (InvoiceID) | Tên khách hàng | Số điện thoại | Sản phẩm | Tổng tiền |
| ---------------------- | -------------- | ------------- | -------- | --------- |
| HD001                  | An             | 0912345678    | Bút bi   | 50,000    |
| HD001                  | An             | 0912345678    | Vở       | 50,000    |
| HD001                  | An             | 0912345678    | Thước    | 50,000    |
| HD002                  | Bình           | 0987654321    | Sách     | 80,000    |
| HD002                  | Bình           | 0987654321    | Bút chì  | 80,000    |

### Khóa chính (PK):

-   **(InvoiceID, Sản phẩm)** – đảm bảo mỗi dòng là duy nhất.

---

## Chuẩn hóa sang 2NF

### Thực hiện:

-   Tách dữ liệu thành 3 bảng:
    1. **Customer** – lưu thông tin khách hàng.
    2. **Invoice** – lưu thông tin hóa đơn.
    3. **InvoiceLine** – lưu chi tiết từng sản phẩm trong hóa đơn.

---

### Bảng: `Customer`

| **CustomerID (PK)** | **CustomerName** | **Phone**  |
| ------------------- | ---------------- | ---------- |
| C001                | An               | 0912345678 |
| C002                | Bình             | 0987654321 |

---

### Bảng: `Invoice`

| **InvoiceID (PK)** | **CustomerID (FK)** | **InvoiceDate** | **TotalAmount** |
| ------------------ | ------------------- | --------------- | --------------- |
| HD001              | C001                | 2025-11-05      | 50,000          |
| HD002              | C002                | 2025-11-05      | 80,000          |

---

### Bảng: `InvoiceLine`

| **InvoiceID (FK)** | **ProductName** | **Quantity** | **LineTotal** |
| ------------------ | --------------- | ------------ | ------------- |
| HD001              | Bút bi          | 1            | 10,000        |
| HD001              | Vở              | 1            | 20,000        |
| HD001              | Thước           | 1            | 20,000        |
| HD002              | Sách            | 1            | 50,000        |
| HD002              | Bút chì         | 1            | 30,000        |

---

### Khóa chính (PK) và khóa ngoại (FK):

| Bảng        | PK                       | FK                                |
| ----------- | ------------------------ | --------------------------------- |
| Customer    | CustomerID               | —                                 |
| Invoice     | InvoiceID                | CustomerID → Customer(CustomerID) |
| InvoiceLine | (InvoiceID, ProductName) | InvoiceID → Invoice(InvoiceID)    |

---

### Kết quả đạt được:

-   Mỗi bảng chỉ lưu dữ liệu liên quan trực tiếp đến đối tượng của nó.
-   Giảm thiểu trùng lặp.
-   Tuy nhiên, **sản phẩm vẫn chưa có mã định danh riêng** → cần bước 3NF.

---

## Chuẩn hóa sang 3NF

### Bảng: `Customer`

| **CustomerID (PK)** | **CustomerName** | **Phone**  |
| ------------------- | ---------------- | ---------- |
| C001                | An               | 0912345678 |
| C002                | Bình             | 0987654321 |

---

### Bảng: `Product`

| **ProductID (PK)** | **ProductName** | **UnitPrice** |
| ------------------ | --------------- | ------------- |
| P001               | Bút bi          | 10,000        |
| P002               | Vở              | 20,000        |
| P003               | Thước           | 20,000        |
| P004               | Sách            | 50,000        |
| P005               | Bút chì         | 30,000        |

---

### Bảng: `Invoice`

| **InvoiceID (PK)** | **CustomerID (FK)** | **InvoiceDate** | **TotalAmount** |
| ------------------ | ------------------- | --------------- | --------------- |
| HD001              | C001                | 2025-11-05      | 50,000          |
| HD002              | C002                | 2025-11-05      | 80,000          |

---

### Bảng: `InvoiceLine`

| **InvoiceID (FK)** | **ProductID (FK)** | **Quantity** | **LineTotal** |
| ------------------ | ------------------ | ------------ | ------------- |
| HD001              | P001               | 1            | 10,000        |
| HD001              | P002               | 1            | 20,000        |
| HD001              | P003               | 1            | 20,000        |
| HD002              | P004               | 1            | 50,000        |
| HD002              | P005               | 1            | 30,000        |

---

### Khóa chính (PK) và khóa ngoại (FK):

| **Bảng**    | **Khóa chính (PK)**    | **Khóa ngoại (FK)**                                            |
| ----------- | ---------------------- | -------------------------------------------------------------- |
| Customer    | CustomerID             | —                                                              |
| Product     | ProductID              | —                                                              |
| Invoice     | InvoiceID              | CustomerID → Customer(CustomerID)                              |
| InvoiceLine | (InvoiceID, ProductID) | InvoiceID → Invoice(InvoiceID), ProductID → Product(ProductID) |

---
